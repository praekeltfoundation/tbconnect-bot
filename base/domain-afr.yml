intents:
  - request_tbcheck
  - affirm
  - deny
  - inform
  - maybe
  - more
  - chitchat
  - address
  - opt_in
  - exit:
      triggers: action_exit

entities:
  - province
  - number

actions:
  - action_set_activation
  - action_study_restriction
  - action_session_start
  - action_exit
  - action_opt_in
  - utter_ask_mobile_no
  - utter_ask_terms
  - utter_ask_age
  - utter_ask_gender
  - utter_ask_location
  - utter_ask_location_confirm
  - utter_ask_symptoms_cough
  - utter_ask_symptoms_fever
  - utter_ask_symptoms_sweat
  - utter_ask_symptoms_weight
  - utter_ask_exposure
  - utter_ask_tracing
  - utter_risk_high
  - utter_risk_moderate
  - utter_risk_low
  - utter_control
  - utter_health_consequence
  - utter_planning_prompt
  - utter_ask_soft_commitment
  - utter_commitment_yes
  - utter_soft_commitment_no
  - utter_ask_soft_commitment_plus
  - utter_soft_commitment_plus_no
  - utter_risk_low_unknown_exposure
  - utter_follow_up_request
  - utter_keywords
  - utter_opt_in_yes
  - utter_do_tb_screening
  - utter_ask_research_consent
  - utter_ask_clinic_list
  - utter_ask_clinic_visit_day

slots:
  mobile_no:
    type: unfeaturized
    auto_fill: false
  activation:
    type: unfeaturized
    auto_fill: false
  study_restriction:
    type: unfeaturized
    auto_fill: false
  terms:
    type: categorical
    values:
      - yes
  age:
    type: unfeaturized
    auto_fill: false
  gender:
    type: unfeaturized
    auto_fill: false
  province:
    type: unfeaturized
    auto_fill: false
  location:
    type: unfeaturized
    auto_fill: false
  location_confirm:
    type: unfeaturized
    auto_fill: false
  location_coords:
    type: unfeaturized
    auto_fill: false
  city_location_coords:
    type: unfeaturized
    auto_fill: false
  symptoms_cough:
    type: unfeaturized
    auto_fill: false
  symptoms_fever:
    type: unfeaturized
    auto_fill: false
  symptoms_sweat:
    type: unfeaturized
    auto_fill: false
  symptoms_weight:
    type: unfeaturized
    auto_fill: false
  exposure:
    type: unfeaturized
    auto_fill: false
  tracing:
    type: unfeaturized
    auto_fill: false
  research_consent:
    type: unfeaturized
    auto_fill: false
  soft_commitment:
    type: unfeaturized
    auto_fill: false
  soft_commitment_plus:
    type: unfeaturized
    auto_fill: false
  group_arm:
    type: unfeaturized
  tbcheck_id:
    type: unfeaturized
  clinic_list:
    type: unfeaturized
    auto_fill: false
  clinic_visit_day:
    type: unfeaturized
    auto_fill: false
  nearest_clinic:
    type: unfeaturized
    auto_fill: false
  original_clinic_list:
    type: unfeaturized
    auto_fill: false

forms:
  - tbcheck_form
  - tbcheck_terms_form
  - tbcheck_profile_form
  - group_arm_form

responses:
  utter_ask_mobile_no:
      - text: |
          Tik asseblief die selfoonnommer in van die persoon waarvoor hierdie TBCheck is.

  utter_invalid_mobile_no:
      - text: |
          Invalid mobile number.

  utter_welcome:
      - text: |
          *TB GesondheidsVraelys* is jou TB-kontrole vraelys. Dit kan aandui of jy getoets moet word vir TB.

          ‘n TB-toets sal bevestig of jy TB het of nie. TB kan genees word. Dit tas gewoonlik die longe aan. Antwoord asseblief 'n paar vrae om raad te kry oor wat om volgende te doen.


          Dankie dat jy beheer neem van jou gesondheid.

  utter_welcome_back:
      - text: |
          Welkom terug by *TB GesondheidsVraelys*, jou TB-kontrole vraelys. Dankie dat jy beheer neem van jou gesondheid.

  utter_ask_terms:
      - text: |
          Antwoord met een van die VETGEDRUKTE woorde om voort te gaan

          *AANVAAR* ✅ - _om die bepalings en voorwaardes te aanvaar_
          *LEES* 📄 - _om die bepalings en voorwaardes te lees_

          (of Kies KIESLYS 📌 _om terug te gaan na die hoof-kieslys_)

  utter_more_terms:
      - text: |
          Hierdie diens verskaf slegs inligting en is nie 'n plaasvervanger vir professionele mediese advies/diagnose/behandeling nie. Kry advies van 'n gekwalifiseerde gesondheidsdiens-verskaffer vir jou mediese toestand en -behandeling, veral as jy erge simptome ontwikkel.

          Jy maak op eie risiko staat op hierdie inligting. Jy stem saam dat jy self verantwoordelik is vir jou mediese sorg en behandeling. Jy stem saam dat jy nie mediese advies sal ignoreer of behandeling sal uitstel as gevolg van hierdie diens nie.

  utter_ask_research_consent:
      - text: |
          Een laaste ding...

          Ons mag dalk vir jou 'n paar eenvoudige vrae vra vir navorsingsdoeleindes nadat jy die TB HealthCheck voltooi het. Om aan die opname deel te neem is GRATIS en sal geen lugtyd gebruik nie. Ons sal hierdie inligting gebruik om te sien of TB HealthCheck mense help.
          
          Is jy gewillig om deel te neem?
          
          1. JA, ek wil deelneem
          2. NEE dankie

  utter_more_terms_doc:
    - document: "https://healthcheck-rasa-images.s3.af-south-1.amazonaws.com/NDOH_WhatsApp_TB_Privacy_Policy_September2021.pdf"
      text: Bepalings en Voorwaardes

  utter_ask_province:
    - text: |
        In watter provinsie woon jy tans?

        *1.* OOSKAAP
        *2.* VRYSTAAT
        *3.* GAUTENG
        *4.* KWAZULU-NATAL
        *5.* LIMPOPO
        *6.* MPUMALANGA
        *7.* NOORDWES
        *8.* NOORDKAAP
        *9.* WESKAAP

  utter_incorrect_selection:
    - text: |
        Hierdie diens werk die beste wanneer jy gebruik maak van die *VETGEDRUKTE* opsies.

        📌 Antwoord met *KIESLYS* om na die hoof-kieslys terug te keer

  utter_incorrect_location:
    - text: |
        Indien jy jou adres verkeerd getik het, probeer asseblief weer. Indien jy nie daartoe in staat is om jou adres te verskaf nie, TIK asseblief die naam van jou Woonbuurt, Informele Nedersetting, Dorp of Dorpie (of naaste)

  utter_ask_age:
    - text: |
        Hoe oud is jy?

        *1.* onder 18
        *2.* 18-39
        *3.* 40-65
        *4.* oor 65

  utter_ask_gender:
    - text: |
        As watter geslag identifiseer jy?

        *1.* MANLIK
        *2.* VROULIK
        *3.* ANDER
        *4.* WIL LIEWER NIE SÊ NIE

  utter_ask_location:
    - text: |
        Dankie. Nou benodig ons jou ligging.

        TIK asseblief jou woonadres (of die adres waar jy tans woon) in. Gee die straatnommer, straatnaam, woonbuurt/township/stad/dorp

  utter_ask_location_confirm:
    - text: |
        Ons gebruik Google Location Services om jou ligging te bevestig. Maak asseblief seker dat onderstaande adres korrek is en ooreenstem met die inligting wat jy vir ons gegee het:
        {location}

        *1.* JA
        *2.* NEE

  utter_ask_symptoms_cough:
    - text: |
        ⬛⬜⬜⬜⬜⬜

        Kom ons kyk hoe jy vandag voel. Hoes jy?

        *1.* JA
        *2.* NEE

  utter_ask_symptoms_fever:
    - text: |
        ⬛⬛⬜⬜⬜⬜

        Het jy koors? (wanneer jy aan jou voorkop raak, voel dit warm?)

        *1.* JA
        *2.* NEE

  utter_ask_symptoms_sweat:
    - text: |
        ⬛⬛⬛⬜⬜⬜

        Sweet jy snags meer as gewoonlik?

        *1.* JA
        *2.* NEE

  utter_ask_symptoms_weight:
    - text: |
        ⬛⬛⬛⬛⬜⬜

        Verloor jy gewig sonder dat jy probeer?

        *1.* JA
        *2.* NEE

  utter_ask_exposure:
    - text: |
        ⬛⬛⬛⬛⬛⬜

        Het jy 'n hoë risiko vir TB?

        _Die kanse dat jy TB het is hoog indien:_
        _Jy saam met iemand woon wat TB het/gehad het die afgelope jaar, OF as jy TB gehad die afgelope 2 jaar, OF as jy MIV-positief is._

        *1.* My risiko om TB te hê, is hoog
        *2.* My risiko om TB te hê, is nie hoog nie
        *3.* Ek weet nie of my risiko hoog is nie

  utter_ask_tracing:
    - text: |
        ⬛⬛⬛⬛⬛⬛

        Laastens, bevestig asseblief dat, sover jy weet, die inligting wat jy gegee het *korrek* is en dat jy die Nasionale Departement van Gesondheid toestemming gee om jou te kontak indien nodig?

        *1.* JA
        *2.* NEE
  utter_risk_high:
    - text: |
        *Jou antwoorde op die vrae toon dat jy binne die volgende week vir 'n TB-toets moet gaan*

        - Gaan na jou plaaslike kliniek vir 'n gratis TB-toets.
        - Sit asseblief jou gesigmasker op voordat jy by die kliniek ingaan.

  utter_risk_moderate:
    - text: |
        *Jou antwoorde op die vrae toon dat jy binne die volgende week vir 'n TB-toets moet gaan*

        - Gaan na jou plaaslike kliniek vir 'n gratis TB-toets.
        - Sit asseblief jou gesigmasker op voordat jy by die kliniek ingaan.

  utter_risk_low:
    - text: |
        *Jy benodig nie tans 'n TB-toets nie.*

        - Indien jy begin hoes, koors kry, gewig verloor of snags sweet, besoek jou naaste kliniek.

  utter_control:
    - text: |
        *Jou antwoorde op die vrae dui aan dat jy hierdie week 'n TB-toets moet laat doen.* 

        🩸 Besoek jou plaaslike kliniek vir 'n gratis TB-toets.
        😷 Sit asseblief 'n gesigmasker op voor jy by die kliniek ingaan.

  utter_health_consequence:
    - text: |
        *Jou antwoorde op die vrae dui aan dat jy hierdie week 'n TB-toets moet laat doen.*

        As TB vroeg gediagnoseer word, kan dit genees word. Hoekom wag? Laat toets jou vandag!
        
        🩸 Besoek jou plaaslike kliniek vir 'n gratis TB-toets.
        😷 Sit asseblief 'n gesigmasker op voor jy by die kliniek ingaan. 

  utter_planning_prompt:
    - text: |
        *Jou antwoorde op die vrae dui aan dat jy hierdie week 'n TB-toets moet laat doen.* 

        Hier is 'n paar wenke om jou te help beplan:
        
        🟢 Maak tyd. Jou gesondheid is belangrik!
        🟢 Kies die gerieflikste kliniek vir jou toets. Hieronder is die 5 klinieke naaste aan jou.
        🟢 Sit asseblief 'n gesigmasker op voor jy by die kliniek ingaan.
        🟢 Wees vroeg daar! Klinieke is van Maandag- tot Vrydagoggend oop vir TB-toetse.

  utter_ask_clinic_list:
    - text: |
        *Waar sal jy gaan vir jou toets?*
        
        Antwoord met die kliniek:
        {nearest_clinic}

  utter_ask_clinic_visit_day:
    - text: |
        *Wanneer sal jy gaan vir jou toets?*

        *1.* MAANDAG
        *2.* DINSDAG
        *3.* WOENSDAG
        *4.* DONDERDAG
        *5.* VRYDAG

  utter_ask_soft_commitment:
    - text: |
        ⚠️ *Jou antwoorde op die vrae dui aan dat jy hierdie week 'n TB-toets moet laat doen.* 

        🩸 Gaan na jou plaaslike kliniek vir 'n gratis TB-toets.
        😷 Sit asseblief 'n gesigmasker op voor jy by die kliniek ingaan.
        
        Neem jy voor om jou te laat toets?
        
        *1. JA* 
        *2. NEE*

  utter_commitment_yes:
    - text: |
        Geluk omdat jy jou gesondheid eerste stel! 👏
      claim: release

  utter_soft_commitment_no:
    - text: |
        ⚠️ *Onthou: dit is belangrik om vir TB getoets te word*
        Laat toets jou gou as jy nog nie het nie!
      claim: release

  utter_ask_soft_commitment_plus:
    - text: |
        ⚠️ *Jou antwoorde op die vrae dui aan dat jy hierdie week 'n TB-toets moet laat doen.*

        🩸 Gaan na jou plaaslike kliniek vir 'n gratis TB-toets.
        😷 Sit asseblief 'n gesigmasker op voor jy by die kliniek ingaan.
        📲 Jy sal R10 lugtyd kry as jy onderneem om jou te laat toets. Lugtyd sal binne 1 uur aan jou gestuur word.
        
        Neem jy voor om jou te laat toets? 

        *1. JA* 
        *2. NEE*

  utter_soft_commitment_plus_no:
    - text: |
        ⚠️ Al kan jy nie nou voorneem om dit te doen nie, is dit steeds belangrik om getoets te word.
      claim: release

  utter_risk_low_unknown_exposure:
    - text: |
        Kyk of die mense met wie jy woon op TB-behandeling is.

        Indien jy nie bewus is van jou HIV-status nie, besoek asseblief jou kliniek vir 'n gratis toets.

        Kom terug en doen weer die TB-check sodra jy jou uitslae het.

  utter_follow_up_request:
    - text: |
        📲 Om opvolg-boodskappe te ontvang, antwoord *IN*
      claim: release

  utter_keywords:
    - text: |
        💊 *GENESING* vir inligting oor behandeling
        📗 *BRONNE* vir inligting oor simptome en TB-toetsing
        📌 *KIESLYS* om na die hoof-kieslys terug te keer
      claim: release

  utter_opt_in_yes:
    - text: |
        Dankie dat jy gekies het om opvolg-boodskappe te ontvang.

        📌 Antwoord met *KIESLYS* om na die hoof-kieslys terug te keer
      claim: release

  utter_do_tb_screening:
    - text: |
        Reageer asseblief met *TB* om jou TB-check te begin.
      claim: release

  utter_study_completed:
    - text: |
        ⚠️Unfortunately, you cannot participate in the study more than once.
        You can still continue with a TB Check but you will not be included
        in the study.
      claim: release

  utter_study_minor_error:
    - text: |
        ⚠️  Unfortunately you cant participate in the study if you are younger
        than 18. You can still continue with a TB Check but you will not be 
        included in the study.
      claim: release

  utter_research_consent_no:
    - text: |
        Okay, no problem. You will not be included in the research, but you can still 
        continue to check if you need to take a TB test.

  utter_research_consent_more_p1:
    - text: |
        *Can you tell me more about the research?*
        
        We are conducting a study about the TB HealthCheck tool.
        We will ask you about your choices in relation to the tool.
        
        *What information will you ask me for?*

        We'll never ask your name, but may ask your ID number so that we can help 
        to link you to a facility to get tested. Providing your ID is completely up to you.
        We would only use it for your benefit.
        
        *Why did I get this SMS?*

        We have chosen you at random from a database hosted by the Western Cape Department of Health.

  utter_research_consent_more_p2:
    - text: |
        *What will I need to do?*

        We will ask you a few questions and it will take about 6 minutes of your time.

        *What will happen to the information?*

        We will store it safely as required by law and it will only be used by the Stellenbosch University
        and Erasmus University researchers.
        
        The information is stored without your name and ID. We will share what we find other researchers 
        and journals what we find, but what we share will be based on averages and totals from the full 
        group of survey participants.

  utter_research_consent_more_p3:
    - text: |
        *What if I want to stop halfway through the survey?*

        That's OK. You can stop at any point.
        
        *Are there any costs or risks to me?*

        There are no costs and no risks. Your information will be kept private and safe. 
        The researchers will receive the answers without names or ID numbers.
        
        *What can I do if I am unhappy?*

        If you have questions or doubts about this invitation, please contact Ronelle Burger on 
        0838863016 or at rburger@sun.ac.za.
        
        TB HealthCheck has been approved by the Health Research Ethics Committee. 
        You can contact them by calling 021 938 9677 or 021 938 9819.

  # claim: revert will ignore the message text, and reevaluate this message using
  # turn automation
  utter_exit:
    - text: "Jy kan jou TB-Check enige tyd doen deur die woord *TB* te tik."
      claim: revert

session_config:
  session_expiration_time: 5
  carry_over_slots_to_new_session: true
